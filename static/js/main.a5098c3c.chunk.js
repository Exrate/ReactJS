(window["webpackJsonpmy-app2"]=window["webpackJsonpmy-app2"]||[]).push([[0],{323:function(e,t,a){e.exports=a(549)},333:function(e,t,a){},548:function(e,t,a){},549:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),c=a.n(i),l=a(39),o=a(289),s=a(34),u=a(221),m=a(290),p=a.n(m),d=a(291),f=a(24),b="MARK_AS_SERVICED",h="ADD_PATIENT",v="UPDATE_PATIENTS",E="UPDATE_PATIENTS_IN_SERVICE",O="SET_ACTIVE_TICKET",j="REMOVE_ACTIVE_TICKET";function y(e){return{type:h,patient:e}}var g=a(215),D=a(304),S=a(130),w="yyyy-MM-dd",N="yyyy-MM-dd HH:mm",k=[],P=function(e,t){return e.reduce((function(e,a){return(e[a[t]]=e[a[t]]||[]).push(a),e}),{})},x=function(e){return e.filter((function(e){var t=Object(D.a)(e.serviceDate,N,new Date);return Object(S.a)(t,new Date)<=0}))},C=Object(s.c)({patients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:var a=Object(f.a)(e);return t.patient.addedOn=Object(g.default)(new Date,N),a.push(t.patient),a;case v:return t.patients;case b:if(e[t.index]){var n=Object(f.a)(e),r=n[t.index];return r.isServiced=!0,n}break;case E:var i=P(e.filter((function(e){return!e.isServiced})),"specialist");for(var c in i){var l=x(i[c]);l.length&&!l[0].inServiceDate&&(l[0].inServiceDate=Object(g.default)(new Date,N))}return Object(f.a)(e);default:return e}},activeTicket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.index;case j:return-1;default:return e}}}),T={key:"app-state",storage:p.a},I=Object(u.a)(T,C),B=(a(333),a(10)),A=a(20),R=a(17),_=a(27),q=a(28),M=a(29),V=a(76),F=a(605),W=a(592),K=a(211),Q=a(56),Y=a(608),z=a(595),H=a(564),J=a(596),L=a(230),U=a(599),G=a(597),$=a(598),X=a(600),Z=a(53),ee=Object(Z.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},toolbar:e.mixins.toolbar}}));var te=function(){var e=ee();return r.a.createElement("div",null,r.a.createElement(W.a,{position:"fixed",className:e.appBar},r.a.createElement(K.a,null,r.a.createElement(Q.a,{variant:"h6",noWrap:!0},"Patient Portal"))),r.a.createElement(Y.a,{className:e.drawer,variant:"permanent",classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(z.a,null,r.a.createElement(H.a,{button:!0,component:V.b,to:"/#/"},r.a.createElement(J.a,null,r.a.createElement(G.a,null)),r.a.createElement(L.a,{primary:"Dashboard"})),r.a.createElement(H.a,{button:!0,component:V.b,to:"/#/queue"},r.a.createElement(J.a,null,r.a.createElement(G.a,null)),r.a.createElement(L.a,{primary:"Queue"})),r.a.createElement(H.a,{button:!0,component:V.b,to:"/#/registration"},r.a.createElement(J.a,null,r.a.createElement($.a,null)),r.a.createElement(L.a,{primary:"Registration"}))),r.a.createElement(U.a,null),r.a.createElement(z.a,null,r.a.createElement(H.a,{button:!0,component:V.b,to:"/#/admin"},r.a.createElement(J.a,null,r.a.createElement(X.a,null)),r.a.createElement(L.a,{primary:"Administration"})))))},ae=a(88),ne=a(166),re=a(606),ie=a(607),ce=function(e){function t(){return Object(A.a)(this,t),Object(_.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(R.a)(t,[{key:"handleSubmit",value:function(e){this.props.dispatch(y(e))}},{key:"render",value:function(){return r.a.createElement(ne.a,null,r.a.createElement(re.a,{p:2},r.a.createElement(Q.a,{variant:"h4",component:"h2",gutterBottom:!0},"Dashboard"),-1===this.props.activeTicket?"You are not currently in queue.":this.renderInQueue()))}},{key:"renderInQueue",value:function(){if(this.props.patients.length>this.props.activeTicket){var e=this.props.patients[this.props.activeTicket],t=Object(ie.a)(Object(D.a)(e.serviceDate,N,new Date),{addSuffix:!0});return r.a.createElement("span",null,"You are currently in queue. Your service time is scheduled for ",e.serviceDate," (",t,").")}}}]),t}(n.Component),le=Object(l.b)((function(e){return{activeTicket:e.activeTicket,patients:e.patients}}))(ce),oe=Object(Z.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},inline:{display:"inline"},inService:{fontWeight:"700"}}}));function se(e){var t=oe();return r.a.createElement(z.a,{className:t.root},e.patients.map((function(a,n){return r.a.createElement("div",{key:n},r.a.createElement(H.a,{alignItems:"flex-start"},r.a.createElement(L.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{component:"span",variant:"body1",className:"".concat(a.inServiceDate?t.inService:""),color:"textPrimary"},"".concat(a.specialist," ").concat(a.inServiceDate?"(in service)":""))),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(Q.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},a.lastName+", "+a.firstName)," \u2014 ".concat(Object(ie.a)(Object(D.a)(a.serviceDate,N,new Date),{addSuffix:!0})))})),e.patients.length-1!==n&&e.patients[n+1].specialist!==a.specialist?r.a.createElement(U.a,{variant:"inset",component:"li"}):"")})))}var ue=function(e){function t(){return Object(A.a)(this,t),Object(_.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){var e=function(e){var t=e&&e.length?Object(f.a)(e):[];return t.sort((function(e,t){var a=Object(D.a)(e.serviceDate,N,new Date),n=Object(D.a)(t.serviceDate,N,new Date);return e.specialist.localeCompare(t.specialist)||Object(S.a)(a,n)})),t}(this.props.patients.filter((function(e){return!e.isServiced})));return r.a.createElement(ne.a,null,r.a.createElement(re.a,{p:2},r.a.createElement(Q.a,{variant:"h4",component:"h2",gutterBottom:!0},"Patients in queue"),r.a.createElement(se,{patients:e})))}}]),t}(n.Component),me=Object(l.b)((function(e){return{patients:e.patients}}))(ue),pe=a(129),de=a(303),fe=a(18),be=a(202),he=a(208),ve=a(180),Ee=a(602),Oe=a(269),je=a(175),ye=a(287),ge=a(286),De=a(272),Se=a(213),we=function e(){Object(A.a)(this,e)};we.Nurse="Nurse",we.Surgeon="Surgeon",we.Psychiatrist="Psychiatrist",we.Cardiologist="Cardiologist",we.Dermatologist="Dermatologist";var Ne=function(){return{firstName:"",lastName:"",specialist:we.Nurse,birthDate:Object(g.default)(new Date,w),serviceDate:Object(g.default)(new Date,N),isServiced:!1}};function ke(e){return r.a.createElement(de.a,{initialValues:Ne(),onSubmit:function(t,a){(0,a.setSubmitting)(!1),e.onSubmit(t)},validationSchema:ve.object().shape({firstName:ve.string().required("Required"),lastName:ve.string().required("Required")})},(function(e){var t=e.values,a=e.touched,n=e.errors,i=e.isSubmitting,c=e.handleChange,l=e.handleBlur,o=e.handleSubmit,s=e.setFieldValue;return r.a.createElement("form",{onSubmit:o},r.a.createElement(Ee.a,{container:!0,spacing:3},r.a.createElement(Ee.a,{item:!0},r.a.createElement(Oe.a,null,r.a.createElement(je.a,{error:n.firstName&&a.firstName,helperText:a.firstName&&n.firstName,name:"firstName",placeholder:"First name",value:t.firstName,onBlur:l,onChange:c}))),r.a.createElement(Ee.a,{item:!0},r.a.createElement(Oe.a,null,r.a.createElement(je.a,{error:n.lastName&&a.lastName,helperText:a.firstName&&n.lastName,name:"lastName",placeholder:"Last name",value:t.lastName,onBlur:l,onChange:c})))),r.a.createElement(Ee.a,{container:!0,spacing:3},r.a.createElement(Ee.a,{item:!0},r.a.createElement(Oe.a,null,r.a.createElement(fe.a,{utils:pe.default},r.a.createElement(be.a,{name:"birthDate",value:t.birthDate,label:"Birth Date",ampm:!1,format:w,onBlur:l,onChange:function(e){return s("birthDate",Object(g.default)(e,w))}})))),r.a.createElement(Ee.a,{item:!0},r.a.createElement(Oe.a,null,r.a.createElement(fe.a,{utils:pe.default},r.a.createElement(he.a,{name:"serviceDate",value:t.serviceDate,label:"Service Date",ampm:!1,minDate:new Date,format:N,onBlur:l,onChange:function(e){return s("serviceDate",Object(g.default)(e,N))}}))))),r.a.createElement(Ee.a,{container:!0,spacing:3},r.a.createElement(Ee.a,{item:!0},r.a.createElement(Oe.a,null,r.a.createElement(ye.a,{htmlFor:"specialist"},"Specialist"),r.a.createElement(ge.a,{name:"specialist",value:t.specialist,onChange:c},r.a.createElement(De.a,{value:we.Nurse},we.Nurse),r.a.createElement(De.a,{value:we.Surgeon},we.Surgeon),r.a.createElement(De.a,{value:we.Psychiatrist},we.Psychiatrist),r.a.createElement(De.a,{value:we.Cardiologist},we.Cardiologist),r.a.createElement(De.a,{value:we.Dermatologist},we.Dermatologist))))),r.a.createElement(Ee.a,{container:!0,spacing:3},r.a.createElement(Ee.a,{item:!0},r.a.createElement(Se.a,{type:"submit",disabled:i,variant:"contained",color:"primary"},"Submit"))))}))}var Pe=function(e){function t(){var e,a;Object(A.a)(this,t);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(a=Object(_.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(i)))).state={redirect:!1},a.setRedirect=function(){a.setState({redirect:!0})},a.renderRedirect=function(){if(a.state.redirect)return r.a.createElement(ae.a,{to:"/"})},a}return Object(M.a)(t,e),Object(R.a)(t,[{key:"handleSubmit",value:function(e){var t;this.props.dispatch(y(e)),this.props.dispatch((t=this.props.patients.indexOf(e),{type:O,index:t})),this.setRedirect()}},{key:"render",value:function(){return r.a.createElement(ne.a,null,r.a.createElement(re.a,{p:2},r.a.createElement(Q.a,{variant:"h4",component:"h2",gutterBottom:!0},"Registration"),r.a.createElement(ke,{onSubmit:this.handleSubmit.bind(this)})),this.renderRedirect())}}]),t}(n.Component),xe=Object(l.b)((function(e){return{activeTicket:e.activeTicket,patients:e.patients}}))(Pe),Ce=a(298),Te=a.n(Ce),Ie=[{field:"firstName",title:"First Name"},{field:"lastName",title:"Last Name"},{field:"specialist",title:"Specialist"},{field:"birthDate",title:"Birth Date"},{field:"serviceDate",title:"Service Date"},{field:"addedOn",title:"Registered On"}];function Be(e){return r.a.createElement(Te.a,{columns:Ie,data:e.patients,title:"Patients",actions:[function(t){return{icon:"done",onClick:function(t,a){return e.handleServiced(a,e.patients.indexOf(a))},disabled:t.isServiced}}],options:{filtering:!0,actionsColumnIndex:-1}})}function Ae(e){var t=Object(f.a)(e);return t.sort((function(e,t){var a=Object(D.a)(e.serviceDate,N,new Date),n=Object(D.a)(t.serviceDate,N,new Date);return Object(S.a)(a,n)})),t}var Re=function(e){function t(){var e,a;Object(A.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(_.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).handleServiced=function(e,t){a.props.dispatch(function(e){return{type:b,index:e}}(t))},a}return Object(M.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return this.props.patients.sort((function(e,t){var a=Object(D.a)(e.serviceDate,N,new Date),n=Object(D.a)(t.serviceDate,N,new Date);return Object(S.a)(a,n)})),r.a.createElement("div",null,r.a.createElement(Be,{patients:Ae(this.props.patients),handleServiced:this.handleServiced.bind(this)}))}}]),t}(n.Component),_e=Object(l.b)((function(e){return{patients:e.patients}}))(Re),qe=Object(Z.a)((function(e){return{content:{flexGrow:1,padding:e.spacing(3)},toolbar:e.mixins.toolbar}}));function Me(){var e=qe();return r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.toolbar}),r.a.createElement(ae.b,{exact:!0,path:"/",component:le}),r.a.createElement(ae.b,{path:"/queue",component:me}),r.a.createElement(ae.b,{path:"/registration",component:xe}),r.a.createElement(ae.b,{path:"/admin",component:_e}))}a(548);function Ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Fe={display:"flex"},We=function(e){function t(){return Object(A.a)(this,t),Object(_.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(M.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchPatients(),setInterval((function(){e.props.updatePatientsInService()}),1e3)}},{key:"render",value:function(){return r.a.createElement(V.a,null,r.a.createElement("div",{style:Fe},r.a.createElement(F.a,null),r.a.createElement(te,null),r.a.createElement(Me,null)))}}]),t}(n.Component),Ke=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ve(a,!0).forEach((function(t){Object(B.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ve(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}),{fetchPatients:function(){return function(e){return fetch("http://localhost:9000/patients").then((function(e){return e.json()})).then((function(t){e(function(e){return{type:v,patients:e}}(t))}))}},updatePatientsInService:function(){return function(e){return e({type:E})}}})(We);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qe=function(){var e=Object(s.e)(I,Object(s.a)(d.a));return{store:e,persistor:Object(u.b)(e)}}(),Ye=Qe.store,ze=Qe.persistor;c.a.render(r.a.createElement(l.a,{store:Ye},r.a.createElement(o.a,{loading:null,persistor:ze},r.a.createElement(Ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[323,1,2]]]);
//# sourceMappingURL=main.a5098c3c.chunk.js.map